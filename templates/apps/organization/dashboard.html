<!-- /templates/app/organization/dashboard.html -->
{% extends 'base.html' %}

{% load i18n %}

{% block title %}{% trans "Admin Dashboard" %}{% endblock %}

{% block content %}
<div class="container-xl">
    <h1>{% trans "Welcome" %}, {{ request.user.username }}</h1>
    <div class="card">
        <div class="card-header">
            <ul class="nav nav-tabs card-header-tabs">
                <li class="nav-item">
                    <a class="nav-link active" id="users-tab" data-bs-toggle="tab" href="#users">{% trans "Users" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="groups-tab" data-bs-toggle="tab" href="#groups">{% trans "Groups" %}</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="teams-tab" data-bs-toggle="tab" href="#teams">{% trans "Teams" %}</a>
                </li>
            </ul>
        </div>
        <div class="card-body">
            <div class="tab-content">
                <div class="tab-pane fade show active" id="users">
                    <table id="users-table" class="table table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>{% trans "Name" %}</th>
                                <th>{% trans "Email" %}</th>
                                <th>{% trans "Account" %}</th>
                                <th>{% trans "Update" %}</th>
                                <th>{% trans "Delete" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for user in users %}
                            <tr>
                                <td>{{ user.username }}</td>
                                <td>{{ user.email }}</td>
                                <td><a href="{% url 'organization:user_profile' user.id %}" class="btn btn-primary btn-sm">{% trans "Visit Account" %}</a></td>
                                <td><a href="{% url 'organization:update_user' user.id %}" class="btn btn-warning btn-sm">{% trans "Update" %}</a></td>
                                <td><a href="{% url 'organization:delete_user' user.id %}" class="btn btn-danger btn-sm">{% trans "Delete" %}</a></td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5">{% trans "No users found." %}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <a href="{% url 'organization:create_user' %}" class="btn btn-primary">{% trans "Create User" %}</a>
                </div>
                <div class="tab-pane fade" id="groups">
                    <table id="groups-table" class="table table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>{% trans "Name" %}</th>
                                <th>{% trans "Description" %}</th>
                                <th>{% trans "Update" %}</th>
                                <th>{% trans "Delete" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for group in groups %}
                            <tr>
                                <td><a href="{% url 'organization:group_detail' group.id %}">{{ group.name }}</a></td>
                                <td>{{ group.description }}</td>
                                <td><a href="{% url 'organization:group_update' group.id %}" class="btn btn-warning btn-sm">{% trans "Update" %}</a></td>
                                <td><a href="{% url 'organization:group_delete' group.id %}" class="btn btn-danger btn-sm">{% trans "Delete" %}</a></td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4">{% trans "No groups found." %}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <a href="{% url 'organization:group_create' %}" class="btn btn-primary">{% trans "Create Group" %}</a>
                </div>
                <div class="tab-pane fade" id="teams">
                    <table id="teams-table" class="table table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>{% trans "Name" %}</th>
                                <th>{% trans "Description" %}</th>
                                <th>{% trans "Group" %}</th>
                                <th>{% trans "Update" %}</th>
                                <th>{% trans "Delete" %}</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for team in teams %}
                            <tr>
                                <td><a href="{% url 'organization:team_detail' team.id %}">{{ team.name }}</a></td>
                                <td>{{ team.description }}</td>
                                <td>{{ team.group.name }}</td>
                                <td><a href="{% url 'organization:team_update' team.id %}" class="btn btn-warning btn-sm">{% trans "Update" %}</a></td>
                                <td><a href="{% url 'organization:team_delete' team.id %}" class="btn btn-danger btn-sm">{% trans "Delete" %}</a></td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="5">{% trans "No teams found." %}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <a href="{% url 'organization:team_create' %}" class="btn btn-primary">{% trans "Create Team" %}</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
